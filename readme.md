# üéÆ Twitch Input Emulator

> **Un syst√®me de contr√¥le de jeu r√©volutionnaire permettant √† une communaut√© Twitch de jouer collectivement en temps r√©el**

Inspir√© du l√©gendaire projet "Twitch Plays Pok√©mon", ce projet transforme votre chat Twitch en une interface de contr√¥le communautaire pour n'importe quel jeu vid√©o. L'application capture les messages du chat en temps r√©el et les traduit en entr√©es clavier pr√©cises, cr√©ant une exp√©rience de jeu collaborative unique.

![Twitch plays pokemon from wikipedia](doc/Twitch_plays_pokemon_animated.gif)

## üìñ Table des mati√®res

- [üåü Aper√ßu du projet](#-aper√ßu-du-projet)
- [üéØ Fonctionnalit√©s](#-fonctionnalit√©s)
- [üèóÔ∏è Architecture technique](#Ô∏è-architecture-technique)
- [üìã Pr√©requis](#-pr√©requis)
- [‚öôÔ∏è Installation](#Ô∏è-installation)
- [üöÄ Utilisation](#-utilisation)
- [üéÆ Configuration pour √©mulateurs](#-configuration-pour-√©mulateurs)
- [üîß Configuration avanc√©e](#-configuration-avanc√©e)
- [üîç Monitoring et debugging](#-monitoring-et-debugging)
- [üìä Performance et optimisation](#-performance-et-optimisation)
- [üö® R√©solution de probl√®mes](#-r√©solution-de-probl√®mes)
- [üõ†Ô∏è D√©veloppement](#Ô∏è-d√©veloppement)
- [ü§ù Contribution](#-contribution)

## üåü Aper√ßu du projet

### Concept

Le Twitch Input Emulator cr√©e un pont entre votre audience Twitch et n'importe quel jeu vid√©o. Chaque spectateur peut influencer le jeu en temps r√©el en tapant des commandes simples dans le chat, transformant le streaming en exp√©rience interactive collaborative.

### Cas d'usage principaux

- **Streaming interactif** : Engager votre audience avec des sessions de jeu communautaires
- **√âv√©nements gaming** : Organiser des marathons de jeu collectifs
- **√âducation** : D√©monstrations interactives de m√©caniques de jeu
- **Exp√©rimentation sociale** : √âtudier la prise de d√©cision collective

### Technologies utilis√©es

- **Backend** : Node.js + TypeScript pour la robustesse et la maintenabilit√©
- **Interface Twitch** : tmi.js pour une connexion chat optimis√©e
- **Contr√¥le syst√®me** : RobotJS pour une simulation d'input pr√©cise
- **Logging** : Winston pour un monitoring professionnel
- **Build** : Syst√®me de compilation TypeScript avec hot-reload

## üéØ Fonctionnalit√©s

### üîå Connectivit√© Twitch avanc√©e
- **Connexion temps r√©el** : Latence minimale avec reconnexion automatique
- **Multi-canal** : Support de plusieurs canaux simultan√©s (configurable)
- **Gestion des permissions** : Filtrage par r√¥le utilisateur (mods, VIPs)
- **Rate limiting** : Protection contre le spam int√©gr√©e

### ‚å®Ô∏è Syst√®me d'input intelligent
- **Mapping flexible** : Configuration compl√®te touches ‚Üî commandes
- **M√©thodes d'input multiples** : keyTap et keyToggle selon le contexte
- **Focus automatique** : Gestion intelligente du focus fen√™tre
- **Compatibilit√© √©mulateur** : Optimisations sp√©ciales pour √©mulateurs

### üõ°Ô∏è Contr√¥les anti-spam
- **Throttling configurable** : Limitation temporelle par commande
- **Filtrage intelligent** : Blacklist/whitelist de commandes
- **Validation stricte** : Regex de validation des inputs
- **Historique de commandes** : Tracking pour analytics

### üìà Monitoring professionnel
- **Logs structur√©s** : Format JSON pour analyse automatis√©e
- **Niveaux configurables** : Debug, info, warn, error
- **M√©triques temps r√©el** : Latence, taux de commandes, erreurs
- **Alertes automatiques** : Notifications sur probl√®mes critiques

## üèóÔ∏è Architecture technique

### Vue d'ensemble

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Chat Twitch   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Input Emulator ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Jeu/√âmulateur   ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ Spectateurs     ‚îÇ    ‚îÇ ‚Ä¢ Validation    ‚îÇ    ‚îÇ ‚Ä¢ Pok√©mon       ‚îÇ
‚îÇ ‚Ä¢ up            ‚îÇ    ‚îÇ ‚Ä¢ Mapping       ‚îÇ    ‚îÇ ‚Ä¢ R√©tro gaming  ‚îÇ
‚îÇ ‚Ä¢ down          ‚îÇ    ‚îÇ ‚Ä¢ Throttling    ‚îÇ    ‚îÇ ‚Ä¢ Autres jeux   ‚îÇ
‚îÇ ‚Ä¢ a, b          ‚îÇ    ‚îÇ ‚Ä¢ Logging       ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Flux de donn√©es d√©taill√©

1. **Capture** : tmi.js intercepte les messages du chat Twitch
2. **Validation** : V√©rification des commandes contre les r√®gles configur√©es
3. **Normalisation** : Conversion en format standardis√© (minuscules, trim)
4. **Throttling** : Application des limitations temporelles
5. **Mapping** : Conversion commande ‚Üí touche syst√®me
6. **Ex√©cution** : Envoi de l'input via RobotJS
7. **Logging** : Enregistrement pour monitoring et debug

### Composants principaux

#### PokemonPlaysX (`src/pokemon-plays-x.ts`)
- **R√¥le** : Orchestrateur principal et gestionnaire Twitch
- **Responsabilit√©s** :
  - Connexion/d√©connexion chat Twitch
  - Validation des messages entrants
  - Coordination avec KeySender
  - Gestion des √©v√©nements r√©seau

#### KeySender (`src/key-sender.ts`)
- **R√¥le** : Gestionnaire d'inputs syst√®me
- **Responsabilit√©s** :
  - Simulation des frappes clavier
  - Gestion du focus fen√™tre
  - Impl√©mentation du throttling
  - Fallbacks en cas d'erreur

#### Config (`src/config/config.ts`)
- **R√¥le** : Centre de configuration
- **Responsabilit√©s** :
  - Mapping touches/commandes
  - Variables d'environnement
  - R√®gles de validation
  - Param√®tres de performance

#### Logger (`src/utils/logger.ts`)
- **R√¥le** : Syst√®me de logging centralis√©
- **Responsabilit√©s** :
  - Logs format√©s et color√©s
  - Rotation de fichiers
  - Niveaux configurables
  - Sortie console et fichier

## üìã Pr√©requis

### Syst√®me

- **Node.js** : Version 14.0+ (recommand√© : 18.0+)
- **NPM/Yarn** : Yarn 1.22+ recommand√© pour la coh√©rence
- **Syst√®me d'exploitation** :
  - macOS 10.14+ (avec permissions d'accessibilit√©)
  - Windows 10+ 
  - Linux (X11 requis)

### Permissions syst√®me

#### macOS
```bash
# Autoriser les permissions d'accessibilit√© dans :
# Pr√©f√©rences Syst√®me ‚Üí S√©curit√© et confidentialit√© ‚Üí Confidentialit√© ‚Üí Accessibilit√©
# Ajouter votre terminal et/ou Node.js
```

#### Windows
```powershell
# Ex√©cuter en tant qu'administrateur pour RobotJS
# Ou configurer les permissions UAC appropri√©es
```

#### Linux
```bash
# Installer les d√©pendances X11
sudo apt-get install libxtst6 libxrandr2 libasound2-dev
```

### Compte Twitch

- **Canal Twitch actif** : Pour recevoir les commandes
- **Pas d'authentification requise** : Lecture seule du chat public

## ‚öôÔ∏è Installation

### Installation rapide

```bash
# 1. Cloner le projet
git clone https://github.com/votre-username/PlayWithTwitchCrowd.git
cd PlayWithTwitchCrowd

# 2. Installer les d√©pendances
yarn install

# 3. Configuration
cp .env.example .env
# √âditer .env avec vos param√®tres

# 4. Build et test
yarn build
yarn dev
```

### Installation d√©taill√©e

#### 1. T√©l√©chargement du code

```bash
git clone https://github.com/votre-username/PlayWithTwitchCrowd.git
cd PlayWithTwitchCrowd

# V√©rifier la version Node.js
node --version  # Doit √™tre >= 14.0

# V√©rifier Yarn
yarn --version  # Recommand√© >= 1.22
```

#### 2. Installation des d√©pendances

```bash
# Installation avec Yarn (recommand√©)
yarn install

# Ou avec NPM si n√©cessaire
npm install

# V√©rification de l'installation
yarn list --depth=0
```

#### 3. Configuration de l'environnement

```bash
# Cr√©er le fichier de configuration
touch .env

# Configuration minimale
echo "TWITCH_CHANNEL=votre-canal" >> .env
echo "LOG_LEVEL=info" >> .env
echo "USE_ADVANCED_INPUT=true" >> .env
```

#### 4. Test de l'installation

```bash
# Compilation TypeScript
yarn build

# Test de d√©marrage (arr√™ter avec Ctrl+C)
yarn dev

# V√©rification des logs
ls -la *.log
```

## üöÄ Utilisation

### D√©marrage rapide

```bash
# Lancement standard
yarn dev

# Avec logs d√©taill√©s
LOG_LEVEL=debug yarn dev

# Mode production
yarn build && node dist/index.js
```

### Configuration de base (.env)

```env
# Configuration obligatoire
TWITCH_CHANNEL=votre-nom-de-canal

# Configuration recommand√©e
LOG_LEVEL=info                    # debug, info, warn, error
LOG_FILE=true                     # Sauvegarder les logs
USE_ADVANCED_INPUT=true           # M√©thode optimis√©e √©mulateurs

# Configuration optionnelle
CONFIG_PROGRAM_NAME=MonJeu        # Nom pour les logs
```

### Variables d'environnement compl√®tes

| Variable | Description | Valeurs | D√©faut | Requis |
|----------|-------------|---------|--------|--------|
| `TWITCH_CHANNEL` | Canal Twitch √† √©couter | string | - | ‚úÖ |
| `LOG_LEVEL` | Niveau de d√©tail des logs | `debug`, `info`, `warn`, `error` | `info` | ‚ùå |
| `LOG_FILE` | √âcrire logs dans fichiers | `true`, `false` | `false` | ‚ùå |
| `USE_ADVANCED_INPUT` | M√©thode input avanc√©e | `true`, `false` | `true` | ‚ùå |
| `CONFIG_PROGRAM_NAME` | Nom du jeu pour logs | string | `""` | ‚ùå |

### Commandes de chat disponibles

| Commande | Touche √©mul√©e | Description | Exemple d'usage |
|----------|---------------|-------------|-----------------|
| `up` | ‚Üë | D√©placement haut | Navigation, menus |
| `down` | ‚Üì | D√©placement bas | Navigation, menus |
| `left` | ‚Üê | D√©placement gauche | Navigation, menus |
| `right` | ‚Üí | D√©placement droite | Navigation, menus |
| `a` | A | Action principale | Confirmer, attaquer |
| `b` | B | Action secondaire | Annuler, d√©fendre |
| `x` | X | Action tertiaire | Menu, objet |
| `y` | Y | Action quaternaire | Course, sorts |
| `start` | S | Pause/Menu | Pause du jeu |
| `select` | E | S√©lection | Changement mode |

## üéÆ Configuration pour √©mulateurs

### √âmulateurs test√©s et compatibles

#### ‚úÖ Parfaitement compatibles
- **VisualBoyAdvance-M** (GBA) - Recommand√©
- **Snes9x** (SNES) - Configuration simple
- **FCEUX** (NES) - Fonctionne nativement
- **DeSmuME** (Nintendo DS) - Avec configuration

#### ‚ö†Ô∏è Compatibilit√© partielle
- **RetroArch** - N√©cessite configuration sp√©ciale
- **OpenEmu** (macOS) - Support limit√©
- **Dolphin** (GameCube/Wii) - Configuration complexe

#### ‚ùå Probl√®mes connus
- **√âmulateurs fullscreen exclusif** - Focus difficile
- **√âmulateurs avec capture input** - Conflit possible

### Configuration recommand√©e

#### 1. Pr√©paration de l'√©mulateur

```bash
# Configurer les touches dans l'√©mulateur pour correspondre :
# A ‚Üí Touche A du clavier
# B ‚Üí Touche B du clavier
# Directionnelles ‚Üí Fl√®ches du clavier
# Start ‚Üí Touche S
# Select ‚Üí Touche E
```

#### 2. Optimisation des param√®tres

```env
# .env optimis√© pour √©mulateurs
USE_ADVANCED_INPUT=true           # OBLIGATOIRE pour √©mulateurs
LOG_LEVEL=debug                   # Pour diagnostiquer les probl√®mes
```

#### 3. Test de fonctionnement

```bash
# Lancer avec logs d√©taill√©s
LOG_LEVEL=debug yarn dev

# Dans le chat Twitch, taper : a
# V√©rifier dans les logs :
# ‚úÖ "Envoi de la touche: a (commande: a)"
# ‚úÖ "KeyTap simple r√©ussi pour: a"
```

### M√©thodes d'input

#### M√©thode avanc√©e (par d√©faut)
```typescript
// Utilise keyToggle avec gestion de focus
robot.keyToggle(key, 'down')
setTimeout(() => robot.keyToggle(key, 'up'), 150)
```

**Avantages** :
- ‚úÖ Meilleure compatibilit√© √©mulateurs
- ‚úÖ Gestion automatique du focus
- ‚úÖ Dur√©e de pression configurable
- ‚úÖ Fallback automatique

#### M√©thode simple (fallback)
```bash
USE_ADVANCED_INPUT=false yarn dev
```

**Utilisation** :
- üîß Si la m√©thode avanc√©e √©choue
- üîß Pour des applications simples
- üîß Debugging de probl√®mes sp√©cifiques

## üîß Configuration avanc√©e

### Personnalisation du mapping

#### Modifier les commandes de base

```typescript
// src/config/config.ts
const defaultKeyMap = {
    // Commandes directionnelles
    up: 'w',           // Chat: "up" ‚Üí Touche: W
    down: 's',         // Chat: "down" ‚Üí Touche: S
    left: 'a',         // Chat: "left" ‚Üí Touche: A
    right: 'd',        // Chat: "right" ‚Üí Touche: D
    
    // Actions principales
    action: 'space',   // Chat: "action" ‚Üí Touche: ESPACE
    jump: 'z',         // Chat: "jump" ‚Üí Touche: Z
    run: 'shift',      // Chat: "run" ‚Üí Touche: SHIFT
    
    // Touches sp√©ciales
    pause: 'p',        // Chat: "pause" ‚Üí Touche: P
    menu: 'escape',    // Chat: "menu" ‚Üí Touche: √âCHAP
}
```

#### Touches sp√©ciales support√©es

```typescript
// Touches modificatrices
'shift', 'ctrl', 'alt', 'cmd'

// Touches de fonction
'f1', 'f2', 'f3', ..., 'f12'

// Touches sp√©ciales
'space', 'enter', 'escape', 'tab', 'backspace'

// Pav√© num√©rique
'numpad_0', 'numpad_1', ..., 'numpad_9'
```

### Syst√®me de throttling avanc√©

#### Configuration globale

```typescript
export const config: Config = {
    timeToWait: 5000,              // 5 secondes entre commandes
    throttledCommands: ['start', 'select', 'reset'],
    globalThrottle: true,          // Throttling pour tous ou par utilisateur
}
```

#### Throttling par commande

```typescript
const advancedThrottling = {
    'start': 10000,    // 10 secondes pour start
    'select': 5000,    // 5 secondes pour select
    'reset': 30000,    // 30 secondes pour reset
    default: 1000,     // 1 seconde par d√©faut
}
```

#### Throttling par utilisateur

```typescript
// Limiter par utilisateur au lieu de globalement
private userThrottling: Map<string, Map<string, number>> = new Map()

private isUserThrottled(username: string, command: string): boolean {
    // Impl√©mentation personnalis√©e
}
```

### Filtrage et validation

#### Blacklist de commandes

```typescript
export const config: Config = {
    filteredCommands: [
        'delete',      // Emp√™cher commandes destructrices
        'format',      // Emp√™cher commandes syst√®me
        'shutdown',    // S√©curit√©
    ]
}
```

#### Validation par regex personnalis√©e

```typescript
// Commandes alphanum√©riques uniquement
const commandValidation = /^[a-zA-Z0-9]+$/

// Commandes avec longueur limit√©e
const lengthValidation = /^.{1,10}$/

// Commandes avec pr√©fixe obligatoire
const prefixValidation = /^game_.+/
```

#### Filtrage par r√¥le utilisateur

```typescript
// R√©server certaines commandes aux mods
const modOnlyCommands = ['reset', 'save', 'load']

if (modOnlyCommands.includes(command) && !tags.mod) {
    logger.warn(`Commande mod refus√©e pour ${tags.username}: ${command}`)
    return
}
```

## üîç Monitoring et debugging

### Syst√®me de logs avanc√©

#### Configuration des niveaux

```typescript
// winston configuration
const logLevels = {
    error: 0,    // Erreurs critiques uniquement
    warn: 1,     // Avertissements + erreurs
    info: 2,     // Informations + warn + error
    debug: 3,    // Tout (tr√®s verbeux)
}
```

#### Formats de logs personnalis√©s

```typescript
// Format JSON pour analyse automatis√©e
format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json(),
    winston.format.metadata()
)

// Format lisible pour d√©veloppement
format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.colorize(),
    winston.format.printf(({ timestamp, level, message, metadata }) => {
        return `${timestamp} [${level}] ${message} ${JSON.stringify(metadata)}`
    })
)
```

#### Rotation automatique des logs

```typescript
import 'winston-daily-rotate-file'

const fileRotateTransport = new winston.transports.DailyRotateFile({
    filename: 'logs/app-%DATE%.log',
    datePattern: 'YYYY-MM-DD',
    maxSize: '20m',
    maxFiles: '14d'
})
```

### M√©triques en temps r√©el

#### Tracking des performances

```typescript
class MetricsCollector {
    private commandCount: Map<string, number> = new Map()
    private responseTime: number[] = []
    private errorCount: number = 0
    
    logCommand(command: string, responseTime: number) {
        this.commandCount.set(command, (this.commandCount.get(command) || 0) + 1)
        this.responseTime.push(responseTime)
    }
    
    getStats() {
        return {
            totalCommands: Array.from(this.commandCount.values()).reduce((a, b) => a + b, 0),
            averageResponseTime: this.responseTime.reduce((a, b) => a + b, 0) / this.responseTime.length,
            mostUsedCommand: this.getMostUsedCommand(),
            errorRate: this.errorCount / this.totalCommands
        }
    }
}
```

#### Dashboard de monitoring

```bash
# Affichage stats en temps r√©el
curl http://localhost:3000/metrics

# Export pour Grafana/Prometheus
curl http://localhost:3000/metrics/prometheus
```

### Debugging de probl√®mes

#### Debug mode complet

```bash
# Logs maximum + m√©triques
DEBUG=* LOG_LEVEL=debug yarn dev

# Profiling de performance
NODE_ENV=profiling yarn dev
```

#### Outils de diagnostic

```typescript
// Test de connectivit√© Twitch
async function testTwitchConnection() {
    try {
        const client = new tmi.client({ channels: [channel] })
        await client.connect()
        logger.info('‚úÖ Connexion Twitch OK')
        await client.disconnect()
    } catch (error) {
        logger.error('‚ùå √âchec connexion Twitch:', error)
    }
}

// Test de RobotJS
function testRobotJS() {
    try {
        robot.keyTap('a')
        logger.info('‚úÖ RobotJS OK')
    } catch (error) {
        logger.error('‚ùå √âchec RobotJS:', error)
    }
}
```

## üìä Performance et optimisation

### Benchmarks de r√©f√©rence

| M√©trique | Valeur cible | Valeur critique |
|----------|--------------|-----------------|
| **Latence chat ‚Üí input** | < 100ms | > 500ms |
| **M√©moire utilis√©e** | < 50MB | > 200MB |
| **CPU en idle** | < 5% | > 20% |
| **Commandes/seconde** | 10-50 | > 100 |

### Optimisations de performance

#### Optimisation m√©moire

```typescript
// Limiter l'historique des commandes
const MAX_COMMAND_HISTORY = 1000
private commandHistory: Array<CommandEntry> = []

addCommand(command: CommandEntry) {
    this.commandHistory.push(command)
    if (this.commandHistory.length > MAX_COMMAND_HISTORY) {
        this.commandHistory.shift()
    }
}
```

#### Optimisation CPU

```typescript
// Debouncing des commandes identiques
private lastCommand: string = ''
private lastCommandTime: number = 0

sendKey(command: string): void {
    const now = Date.now()
    if (command === this.lastCommand && now - this.lastCommandTime < 100) {
        return // Ignorer si m√™me commande < 100ms
    }
    this.lastCommand = command
    this.lastCommandTime = now
    // ... rest of logic
}
```

#### Optimisation r√©seau

```typescript
// Connexion avec options optimis√©es
const client = new tmi.client({
    connection: {
        secure: true,
        reconnect: true,
        maxReconnectAttempts: 10,
        maxReconnectInterval: 30000,
        reconnectDecay: 1.5,
        timeout: 180000,
    },
    options: {
        messagesLogLevel: 'error', // R√©duire les logs tmi.js
        skipUpdatingEmotesets: true,
        skipMembership: true,
    }
})
```

### Monitoring de performance

#### Alertes automatiques

```typescript
class PerformanceMonitor {
    private readonly MAX_MEMORY_MB = 100
    private readonly MAX_LATENCY_MS = 200
    
    checkPerformance() {
        const memUsage = process.memoryUsage()
        const memMB = memUsage.heapUsed / 1024 / 1024
        
        if (memMB > this.MAX_MEMORY_MB) {
            logger.warn(`‚ö†Ô∏è M√©moire √©lev√©e: ${memMB.toFixed(2)}MB`)
            this.triggerGarbageCollection()
        }
    }
    
    private triggerGarbageCollection() {
        if (global.gc) {
            global.gc()
            logger.info('üßπ Garbage collection forc√©')
        }
    }
}
```

## üö® R√©solution de probl√®mes

### Probl√®mes courants et solutions

#### 1. L'application se connecte mais ne re√ßoit pas de messages

**Sympt√¥mes** :
```
[info]: Connected! Waiting for messages...
[info]: Connecting to /votre-canal..
# Mais aucun message @username: commande
```

**Solutions** :
```bash
# 1. V√©rifier le nom du canal (sans #)
echo "TWITCH_CHANNEL=nomducanal" > .env  # ‚úÖ Correct
echo "TWITCH_CHANNEL=#nomducanal" > .env # ‚ùå Incorrect

# 2. Tester avec un canal actif
echo "TWITCH_CHANNEL=shroud" > .env  # Canal tr√®s actif pour test

# 3. V√©rifier la connectivit√©
curl -I https://tmi.twitch.tv
```

#### 2. Les commandes sont re√ßues mais les touches ne fonctionnent pas

**Diagnostic** :
```bash
# Activer logs d√©taill√©s
LOG_LEVEL=debug yarn dev

# Chercher dans les logs :
# ‚úÖ "Envoi de la touche: a (commande: a)"
# ‚ùå "Erreur lors de l'envoi de la touche a: ..."
```

**Solutions macOS** :
```bash
# Autoriser les permissions d'accessibilit√©
# Pr√©f√©rences Syst√®me ‚Üí S√©curit√© ‚Üí Confidentialit√© ‚Üí Accessibilit√©
# Ajouter Terminal et/ou Node.js

# Tester les permissions
osascript -e 'tell application "System Events" to keystroke "a"'
```

**Solutions Windows** :
```powershell
# Ex√©cuter en tant qu'administrateur
# Ou configurer UAC pour Node.js

# Tester RobotJS
node -e "require('robotjs').keyTap('a')"
```

#### 3. Latence √©lev√©e (commandes lentes)

**Diagnostic** :
```typescript
// Ajouter timing dans les logs
const startTime = Date.now()
robot.keyTap(key)
const endTime = Date.now()
logger.info(`Temps d'ex√©cution: ${endTime - startTime}ms`)
```

**Solutions** :
```bash
# 1. Utiliser la m√©thode simple
USE_ADVANCED_INPUT=false yarn dev

# 2. R√©duire le d√©lai clavier
KEYBOARD_DELAY=50 yarn dev  # Au lieu de 100ms par d√©faut

# 3. Optimiser le throttling
TIME_TO_WAIT=500 yarn dev   # Au lieu de 10000ms par d√©faut
```

#### 4. Spam de commandes

**Protection automatique** :
```typescript
// Throttling global
export const config: Config = {
    timeToWait: 2000,  // 2 secondes minimum entre commandes
    throttledCommands: ['up', 'down', 'left', 'right'], // Toutes les directions
}

// Rate limiting par utilisateur
private userCommandCount: Map<string, number[]> = new Map()

private isRateLimited(username: string): boolean {
    const now = Date.now()
    const userCommands = this.userCommandCount.get(username) || []
    
    // Garder seulement les commandes des 10 derni√®res secondes
    const recentCommands = userCommands.filter(time => now - time < 10000)
    this.userCommandCount.set(username, recentCommands)
    
    // Limite : 5 commandes par 10 secondes par utilisateur
    return recentCommands.length >= 5
}
```

### Outils de diagnostic

#### Script de test complet

```bash
#!/bin/bash
# test-installation.sh

echo "üîç Test de l'installation Twitch Input Emulator"

# Test Node.js
echo "üì¶ Version Node.js:"
node --version

# Test d√©pendances
echo "üì¶ Test des d√©pendances:"
node -e "console.log('‚úÖ Node.js OK')"
node -e "require('robotjs'); console.log('‚úÖ RobotJS OK')" 2>/dev/null || echo "‚ùå RobotJS √©choue"
node -e "require('tmi.js'); console.log('‚úÖ tmi.js OK')" 2>/dev/null || echo "‚ùå tmi.js √©choue"

# Test build
echo "üèóÔ∏è Test de compilation:"
yarn build && echo "‚úÖ Build OK" || echo "‚ùå Build √©choue"

# Test configuration
echo "‚öôÔ∏è Test configuration:"
[ -f .env ] && echo "‚úÖ Fichier .env pr√©sent" || echo "‚ùå Fichier .env manquant"
grep -q "TWITCH_CHANNEL" .env && echo "‚úÖ TWITCH_CHANNEL configur√©" || echo "‚ùå TWITCH_CHANNEL manquant"

echo "‚ú® Test termin√©"
```

#### Monitoring en continu

```typescript
// health-check.ts
class HealthChecker {
    private checkInterval: NodeJS.Timeout
    
    start() {
        this.checkInterval = setInterval(() => {
            this.performHealthCheck()
        }, 30000) // Toutes les 30 secondes
    }
    
    private performHealthCheck() {
        const health = {
            timestamp: new Date().toISOString(),
            memory: this.getMemoryUsage(),
            uptime: process.uptime(),
            twitchConnected: this.isTwitchConnected(),
            robotjsWorking: this.testRobotJS(),
        }
        
        logger.info('Health check:', health)
        
        if (!health.twitchConnected) {
            logger.error('üö® Connexion Twitch perdue - tentative de reconnexion')
            this.reconnectTwitch()
        }
    }
}
```

## üõ†Ô∏è D√©veloppement

### Structure du projet d√©taill√©e

```
PlayWithTwitchCrowd/
‚îú‚îÄ‚îÄ üìÅ src/                          # Code source principal
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ index.ts                  # Point d'entr√©e application
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pokemon-plays-x.ts        # Gestionnaire Twitch principal
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ key-sender.ts             # Syst√®me d'input clavier
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ config.ts             # Configuration centralis√©e
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ logger.ts             # Syst√®me de logging
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ metrics.ts            # Collecte de m√©triques
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ health-checker.ts     # Monitoring sant√©
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ types/
‚îÇ       ‚îî‚îÄ‚îÄ üìÑ interfaces.ts         # Types TypeScript
‚îú‚îÄ‚îÄ üìÅ dist/                         # Code compil√© (g√©n√©r√©)
‚îú‚îÄ‚îÄ üìÅ logs/                         # Fichiers de logs (g√©n√©r√©)
‚îú‚îÄ‚îÄ üìÅ doc/                          # Documentation et assets
‚îú‚îÄ‚îÄ üìÅ tests/                        # Tests unitaires et int√©gration
‚îú‚îÄ‚îÄ üìÅ scripts/                      # Scripts utilitaires
‚îú‚îÄ‚îÄ üìÑ package.json                  # Configuration NPM
‚îú‚îÄ‚îÄ üìÑ tsconfig.json                 # Configuration TypeScript
‚îú‚îÄ‚îÄ üìÑ .env                          # Variables d'environnement
‚îî‚îÄ‚îÄ üìÑ README.md                     # Ce fichier
```

### Scripts disponibles

```bash
# D√©veloppement
yarn dev              # Mode d√©veloppement avec hot-reload
yarn build            # Compilation TypeScript
yarn start            # Lancement production
yarn format           # Formatage code avec Prettier

# Testing
yarn test             # Tests unitaires
yarn test:watch       # Tests en mode watch
yarn test:coverage    # Tests avec coverage

# Qualit√©
yarn lint             # V√©rification ESLint
yarn type-check       # V√©rification types TypeScript
yarn audit            # Audit s√©curit√© d√©pendances

# Utilitaires
yarn clean            # Nettoyage dist/ et logs/
yarn reset            # Reset complet (clean + install)
yarn logs             # Affichage logs temps r√©el
```

### Workflow de d√©veloppement

#### 1. Setup environnement

```bash
# Fork et clone
git clone https://github.com/votre-username/PlayWithTwitchCrowd.git
cd PlayWithTwitchCrowd

# Installation d√©pendances
yarn install

# Configuration
cp .env.example .env
# √âditer .env avec vos param√®tres

# Test installation
yarn test-install
```

#### 2. D√©veloppement de features

```bash
# Cr√©er branche feature
git checkout -b feature/nouvelle-fonctionnalite

# D√©veloppement avec hot-reload
yarn dev

# Tests en continu
yarn test:watch

# V√©rification qualit√©
yarn lint && yarn type-check
```

#### 3. Testing et validation

```bash
# Tests complets
yarn test:coverage

# Test avec √©mulateur r√©el
yarn build
TWITCH_CHANNEL=test-channel yarn start

# Validation performance
yarn benchmark
```

### Contribution au projet

#### Guidelines de code

```typescript
// ‚úÖ Bon style
class KeySender {
    private readonly config: Config
    private commandHistory: Map<string, number> = new Map()
    
    constructor(config: Config) {
        this.config = config
        this.setupValidation()
    }
    
    async sendKey(command: string): Promise<void> {
        const normalizedCommand = this.normalizeCommand(command)
        
        if (!this.isValidCommand(normalizedCommand)) {
            throw new InvalidCommandError(`Invalid command: ${command}`)
        }
        
        await this.executeKeyPress(normalizedCommand)
    }
    
    private normalizeCommand(command: string): string {
        return command.toLowerCase().trim()
    }
}
```

#### Standards de commit

```bash
# Format des messages de commit
type(scope): description courte

# Types autoris√©s
feat:     # Nouvelle fonctionnalit√©
fix:      # Correction de bug
docs:     # Documentation
style:    # Formatage, style
refactor: # Refactoring
test:     # Tests
chore:    # Maintenance

# Exemples
feat(input): add support for gamepad inputs
fix(twitch): resolve connection timeout issues
docs(readme): update installation instructions
```

#### Process de Pull Request

1. **Fork** le repository
2. **Cr√©er** une branche feature
3. **D√©velopper** avec tests
4. **Valider** qualit√© code
5. **Cr√©er** Pull Request avec description d√©taill√©e
6. **R√©pondre** aux reviews
7. **Merger** apr√®s approbation

## ü§ù Contribution

### Comment contribuer

Ce projet est ouvert aux contributions ! Voici comment vous pouvez aider :

#### üêõ Rapporter des bugs

1. **V√©rifier** que le bug n'est pas d√©j√† report√©
2. **Utiliser** le template de bug report
3. **Inclure** logs et configuration
4. **Fournir** √©tapes de reproduction

#### üí° Proposer des am√©liorations

1. **Cr√©er** une issue avec le template feature request
2. **D√©crire** le probl√®me √† r√©soudre
3. **Proposer** une solution d√©taill√©e
4. **Discuter** avec la communaut√©

#### üîß D√©velopper des features

1. **Consulter** les issues ouvertes
2. **Commenter** pour prendre une t√¢che
3. **Suivre** le workflow de d√©veloppement
4. **Soumettre** une Pull Request

### Roadmap du projet

#### Version 1.0 (Actuelle)
- ‚úÖ Base fonctionnelle Twitch ‚Üí Jeu
- ‚úÖ Support √©mulateurs principaux
- ‚úÖ Syst√®me de throttling
- ‚úÖ Logging avanc√©

#### Version 1.1 (Prochaine)
- üîÑ Interface web de monitoring
- üîÑ Support multi-canaux
- üîÑ Syst√®me de permissions avanc√©
- üîÑ M√©triques en temps r√©el

#### Version 2.0 (Future)
- üìã Support manettes/gamepad
- üìã Plugins pour jeux sp√©cifiques
- üìã IA pour mod√©ration automatique
- üìã Dashboard streamer complet

### Support et communaut√©

#### üí¨ Obtenir de l'aide

- **GitHub Issues** : Pour bugs et questions techniques
- **Discord** : `[Lien vers serveur Discord]` - Support communautaire
- **Documentation** : Wiki GitHub avec guides d√©taill√©s
- **Email** : `support@twitch-input-emulator.com`

#### üèÜ Contributeurs

Merci √† tous les contributeurs qui font vivre ce projet !

<!-- AUTO-GENERATED CONTRIBUTORS LIST -->

#### üìÑ Licence

Ce projet est sous licence MIT. Voir le fichier [LICENSE](LICENSE) pour plus de d√©tails.

---

<div align="center">

**üéÆ Cr√©√© avec ‚ù§Ô∏è pour la communaut√© gaming**

[![GitHub stars](https://img.shields.io/github/stars/username/PlayWithTwitchCrowd)](https://github.com/username/PlayWithTwitchCrowd/stargazers)
[![GitHub issues](https://img.shields.io/github/issues/username/PlayWithTwitchCrowd)](https://github.com/username/PlayWithTwitchCrowd/issues)
[![GitHub license](https://img.shields.io/github/license/username/PlayWithTwitchCrowd)](https://github.com/username/PlayWithTwitchCrowd/blob/main/LICENSE)

</div>